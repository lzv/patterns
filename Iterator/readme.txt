Итератор применяется, когда нужно обойти какой-либо контейнер, при этом может быть несколько способов обхода, и не следует вносить изменения в сам контейнер. Для одного контейнера может быть несколько одновременных обходов. И кроме этого, поддерживается один интерфейс для обхода разных контейнеров. 

В данном примере сделан обход структуры, полученной в результате применения паттерна Компоновщик (дерево). 

В коде реализовано два варианта итератора, которые разделяются глобальной переменной variant_iterator. Первый, с элементами рекурсии - в итераторе хранится текущее положение в контейнере корня, и так же хранится итератор для элемента в этом текущем положении. Второй использует стек итераторов контейнеров, для хранения текущего пути. Этот вариант допускает использование разных контейнеров в иерархии компоновщика, при условии, что для контейнеров есть итераторы с тем же интерфейсом (не только вектор, но и например список). 
